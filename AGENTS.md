# AGENTS 指南：Agent-Go 仓库

## 目标
本文件用于为在本仓库中执行任务的自动化 Agent 或协作者提供操作指引，确保代码质量、提交流程以及测试步骤一致可控。

## 适用范围
- 本文件位于仓库根目录，其规则适用于整个仓库及所有子目录。
- 如果某个子目录未来新增自己的 `AGENTS.md`，请以距离目标文件最近的说明为准；更深层级的规则优先生效。

## 工作流程建议
1. 在动手之前，通读 `readme.md`、已有源码与本文件，确认需求和现状。
2. 处理需求时保持变更最小化；若需新增目录/文件，请在提交信息中说明理由。
3. 修改完成后再执行测试与静态检查，确认没有遗留问题。
4. 回复使用中文

## 代码与文档约定
为了兼顾不同语言与模块，请按以下层次执行规范：

### 通用原则
- 面向阅读者编写代码，确保命名语义化、函数职责单一，并补充必要注释。
- 新增功能或变更行为时，应同时更新或新增单元测试、集成测试与文档示例。
- 统一使用 UTF-8 编码，文件末尾保留换行，禁止提交调试代码与临时注释。

### Go 代码
- 遵循 [Effective Go](https://go.dev/doc/effective_go) 的命名、注释与结构规范。
- 保存前对所有修改过的文件执行 `go fmt`，并在需要时使用 `goimports` 维护导入顺序。
- 关键逻辑应配套表格测试（table-driven tests），错误处理返回 `error` 并提供上下文。

### Python 代码
- 遵循 PEP 8 与 PEP 257（文档字符串）规范，可使用 `ruff`/`flake8`/`black` 等工具保持风格一致。
- 使用虚拟环境管理依赖，新增包后同步更新 `requirements.txt` 或 `pyproject.toml`。
- 处理中文文本时注意编码与断句，避免将业务常量硬编码在函数内部。

### JavaScript/TypeScript 代码
- 优先使用 TypeScript；若使用纯 JavaScript，请补充 JSDoc 说明类型。
- 采用 ESLint + Prettier（或项目既定工具）保持风格一致，模块导出遵循 tree-shaking 友好实践。
- 与后端交互的 API 调用集中维护，避免在组件中散落硬编码的请求地址。

### 文档与配置
- Markdown 文档保持标题层级清晰，表格与列表语义明确，中英文混排时注意空格与标点统一。
- 环境变量、脚本或配置文件需在文档中说明用途及默认值，必要时提供示例配置。
- 对外提供的 README 或开发者文档请包含快速开始、测试步骤与常见问题。

## 测试与质量检查
完成改动后，按需运行以下命令；如因环境限制无法执行，请在提交说明中注明原因：
1. `go test ./...`
2. `go vet ./...`
3. 若仓库启用了其他工具（如 `staticcheck`、`golangci-lint` 等），请在对应目录的 `AGENTS.md` 或文档中查找补充要求。

## Git 提交流程
- 每个逻辑独立的修改创建单独提交，提交信息使用英文祈使句，例如 `Add HTTP client retries`。
- 提交前确认 `git status` 工作树干净，且所有测试均通过。
- 如果新增或修改配置、脚本，请在提交信息中说明目的和使用方式。

## 常见注意事项
- 避免提交无关文件（如编辑器缓存、编译输出等），必要时更新 `.gitignore`。
- 若需要引入第三方依赖，请优先使用 Go Modules，并运行 `go mod tidy` 同步依赖。
- 发现本指南过时或不完整时，请在对应修改中一并更新此文件，并清楚描述变更。
